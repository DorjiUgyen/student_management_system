{% extends 'layouts/subject_teacherMain.html' %}
{% block title %} Student Management System {% endblock title %}
<!-- Specific CSS goes HERE -->
{% block stylesheets %}
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.6.4/css/bootstrap-datepicker.css"type="text/css" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.6.4/css/bootstrap-datepicker.css" type="text/css" />
<link href="../static/vendor/formValidation/tachyons.min.css" type="text/css" rel="stylesheet" />
<link href="../static/vendor/formValidation/formValidation.min.css" type="text/css" rel="stylesheet" />
{% endblock stylesheets %}
{% block content %}
<div class="main-panel">
    <div class="content-wrapper">
        <div class="row">
            <div class="col-12 grid-margin stretch-card">
                <div class="card">
                    <div class="card-body">
                        <h4 class="card-title">Evaluate Student</h4>
                        <hr>
                       
                        <div class="gal-detail thumb ">
                            <h5>Passport Size Photo</h5>
                            <a href="{{ std.half_photo }}" class="image-popup"
                                title="Passport Size Photo">
                                <img src="{{ std.half_photo }}" class="thumb-img-mark" width="200"
                                    height="150" alt="Passport Size Image">
                            </a>

                        </div>
                        <p><b>Student Name:</b> {{std.first_name}} {{std.last_name}}</p>
                        <p><b>Student CID:</b> {{std.student_cid}}</p>
                        <p><b>Index Number:</b> {{std.index_number}}</p>
                        <hr>
                        <div class="container register-form">
                            <div class="form">
                                <div class="note">
                                    <p>Enter the marks obtain :</p>
                                </div>
                                <br>
                                <form action="#" id="student_marks">
                                <div class="form-content">
                                    <form id="info">
                                        <input type="hidden" name="sub_id" value="{{current_user.id}}">
                                        <input type="hidden" name="std_id" value="{{std.id}}">
                                    
                                    <div class="row">
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label for="class_test">Class Test 01 :</label>
                                                <input type="text" class="form-control" placeholder="Enter Marks*" name="class_test_1" value=""/>
                                            </div>
                                            <div class="form-group">
                                                <label for="class_test">Continuous Assessment :</label>
                                                <input type="text" class="form-control" placeholder="Enter CA*"  name="CA" value=""/>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label for="lname">Mid-Term Marks :</label>
                                                <input type="text" class="form-control" placeholder="Mid-term marks*"  name="mid_term" value=""/>
                                            </div>
                                            <div class="form-group">
                                                <label for="lname">Annual Exam :</label>
                                                <input type="text" class="form-control" placeholder="Annual Exam Marks*"  name="annual_exam" value=""/>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-group">
                                                <label for="class_test">Class Test 02 :</label>
                                                <input type="text" class="form-control" placeholder="Enter Marks*"  name="class_test_2" value=""/>
                                            </div>
                                            <div class="form-group">
                                                <label for="std_status">Status :</label>
                                                <select name="std_status" id="std_status" class="form-control">
                                                    <option value="">---Select Status---</option>
                                                    <option value="PASS">PASS</option>
                                                    <option value="FAIL">FAIL</option>
                                                   
                                                </select>
                                                
                                            </div>
                                        </div>

                                        <hr>
                                       
                                        <div class="row" id="subjectTeacher_div" style="display: none;">
                                            <h4 class="card-title">Student Remarks</h4>
                                            <div class="col-md-4">
                                                <div class="form-group">
                                                    <label class="form-control-label" for="punctuality">Punctuality</label>
                                                    <select name="punctuality" id="punctuality" class="form-control">
                                                        <option value="">---Select---</option>
                                                        <option value="Outstanding">Outstanding</option>
                                                        <option value="Very Goo">Very Good</option>
                                                        <option value="Good">Good</option>
                                                        <option value="Satisfactory">Satisfactory</option>
                                
                                                    </select>
                                                </div>
                                            </div>

                                            <div class="col-md-4">
                                                <div class="form-group">
                                                    <label class="form-control-label" for="discipline">Discipline</label>
                                                    <select name="discipline" id="discipline" class="form-control">
                                                        <option value="">---Select---</option>
                                                        <option value="Outstanding">Outstanding</option>
                                                        <option value="Very Goo">Very Good</option>
                                                        <option value="Good">Good</option>
                                                        <option value="Satisfactory">Satisfactory</option>
                                                        
                                                    </select>
                                                </div>
                                            </div>
                                            <div class="col-md-4">
                                                <div class="form-group">
                                                    <label class="form-control-label" for="socialservice">Social Service</label>
                                                    <select name="socialservice" id="socialservice" class="form-control">
                                                        <option value="">---Select---</option>
                                                        <option value="Outstanding">Outstanding</option>
                                                        <option value="Very Goo">Very Good</option>
                                                        <option value="Good">Good</option>
                                                        <option value="Satisfactory">Satisfactory</option>
                                                        
                                                    </select>
                                                </div>
                                            </div>

                                            <div class="col-md-4">
                                                <div class="form-group">
                                                    <label class="form-control-label" for="leadership">Leadership Quality</label>
                                                    <select name="leadership" id="leadership" class="form-control">
                                                        <option value="">---Select---</option>
                                                        <option value="Outstanding">Outstanding</option>
                                                        <option value="Very Goo">Very Good</option>
                                                        <option value="Good">Good</option>
                                                        <option value="Satisfactory">Satisfactory</option>
                                                        
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                    </div>  
                                </form>
		                        <div class="button-center">
			                        <button type="submit" id="sub_sent" class="btn btn-sm btn-warning student_reg" style="color: white; width: 101px; height: 40px; font-size: 16px;">Submit</button>
		                        </div>
                                </div>
                               </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock content %}
<!-- Specific JS goes HERE -->
{% block javascripts %}

<script src="https://code.jquery.com/jquery-3.3.1.min.js"
    integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
    crossorigin="anonymous"></script>
<script src="../static/vendor/formValidation/es6-shim.min.js"></script>
<script src="../static/vendor/formValidation/formValidation.min.js"></script>
<script src="../static/vendor/formValidation/Bootstrap.min.js"></script>
<script src="../static/vendor/formValidation/Tachyons.min.js"></script>
<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
<script src="../static/js/contact_vilidation.js"></script>
<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>

<script>

$("#sub_sent").click(function(){ 
    var form = document.getElementById("info");
    var data = new FormData(form);
    $.ajax({
        type: 'POST',
        url: '/store-std-marks',
        data: data,
        processData: false,
        contentType: false,
        cache: false,

        success: function (res) {
            if (res === 'Error') {
                swal("Data already exist", "Infomation submission failed", "error")
                    .then(function () {
                        window.location = ""
                    });
            } else {
                swal("Marks successfully submitted", "Click Ok to continue", "success")
                    .then(function () {
                        window.location = ""
                    })
            }
        },
        error: function () {
            swal("Infomation submission failed", "Click Ok to continue", "error")
                .then(function () {
                    window.location = ""
                })
        }
    });
});


// =================================================

    $('#sub_sent').click(function(){
        swal("Information successfully submitted", "Click Ok to continue", "success")
                .then(function () {
                    window.location = "/view-std-table"
                })
    })



    $("#std_status").on("change", function(){
        let status =  $("#std_status").val();
        if(status === "PASS" || status === "FAIL"){
            $("#subjectTeacher_div").show();
        }else{
            $("#subjectTeacher_div").hide();
        }
    });
</script>
{% endblock javascripts %}
